<!DOCTYPE html>
<html lang="pl" xml:lang="pl" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>&lt;jid.pl/&gt; | Informacje i statystyki</title>
    <link href="/stylesheets/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="/stylesheets/main.css" rel="stylesheet" type="text/css">
    <script src="/javascripts/jquery-1.7.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.3/moment-with-locales.min.js"></script>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  </head>
  <style>
    html,body {
      background: none;
    }
    h2 {
      margin-bottom: 10px;
    }
    html {
    }
    li {
      color: #404040;
    }
    ul.nav-pills {
      margin: 0;
    }
    p {
    }
    #main {
      box-shadow: 5px 10px 10px rgba(0, 0, 0, 0.4) inset;
    }
    #menu {
      padding: 10px;
      border-bottom: 1px solid #ccc;
    }
    #shadow {
    
      box-shadow: 0 10px 10px rgba(0, 0, 0, 0.4) inset;
    }
    #header {
      padding: 20px;
      clear: both;
      overflow: hidden;
      border-bottom: 10px solid #880000;
    }
    #content {
      padding: 10px;
      width: 670px;   
    }
    
    .hero-unit {
      padding: 30px;
    }
    
    ul.nav-pills {
      margin-top: 5px;
    }
    
    .nav-pills > li > a {
      font-weight: bold;
      border-radius: 8px;
      margin: 5px 5px 5px 0;
      color: #880000;
      text-shadow: none;
    }
    .nav-pills > li > a:hover {
      color: #ffffff;
      background-color: #aa0000;
      text-shadow: none;
    }
    .twtr-ft {
      display: none;
    }
    a {
      color: #880000;
    }
    a:hover {
      color: #aa0000;
      text-decoration: none;
    }
    .comments {
      padding: 10px 0;
    }
  </style>
  <body>
    <div id="main">
      <div id="menu">
        <ul class="nav nav-pills">
          <li><a href="/">Strona główna</a></li>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/info/">Informacje</a></li>
          <li><a href="/history/">Historia</a></li>
          <li><a href="/help/">Pomoc</a></li>
          <li><a href="/contact/">Kontakt</a></li>
        </ul>
      </div>
      <div id="header">
        <img src="/images/logo.png" style="position: absolute; top: 20px; right: 20px;">
        <h1><a href="/">&lt;jid.pl/&gt;</a> <small>Publiczny serwer Jabber/XMPP</small></h1>
      </div>
    </div>
    <div id="content">
      <h2>Informacje i statystyki</h2>
      <p>Poniżej znajdziejsz garść informacji na temat serwera.</p>
      <script>
        moment.locale("pl");
        $.ajax({
          url: 'http://whateverorigin.org/get?url=' + encodeURIComponent('http://jid.pl/stats/') + '&callback=?',
          dataType: 'json',
          timeout: 5000,
          success: function(data) {
            $('#users-count').html(data.contents.user.count);
            $('#user-sessions-encrypted').html(data.contents.user.sessions.encrypted);
            $('#user-sessions-unencrypted').html(data.contents.user.sessions.unencrypted);
            $('#user-sessions').html(data.contents.user.sessions.unencrypted + data.contents.user.sessions.encrypted);
        
            $('#server-sessions-outgoing-encrypted').html(data.contents.server.sessions.outgoing.encrypted);
            $('#server-sessions-outgoing-unencrypted').html(data.contents.server.sessions.outgoing.unencrypted);
            $('#server-sessions-outgoing').html(data.contents.server.sessions.outgoing.unencrypted + data.contents.server.sessions.outgoing.encrypted);
        
            $('#server-sessions-incoming-encrypted').html(data.contents.server.sessions.incoming.encrypted);
            $('#server-sessions-incoming-unencrypted').html(data.contents.server.sessions.incoming.unencrypted);
            $('#server-sessions-incoming').html(data.contents.server.sessions.incoming.unencrypted + data.contents.server.sessions.incoming.encrypted);
        
            $('#uptime').html(moment(data.contents.uptime * 1000).fromNow());
            $('#version').html(data.contents.version);
          }
        });
      </script>
      <h3 style="margin-bottom: 20px;">Statystyki</h3>
      <div id="stats">
        <!-- /{:style=>"display: none;"} -->
        <table class="table" style="width: 400px;">
          <tr>
            <th>
              <div>Liczba sesji użytkowników</div>
              <div style="font-weight: normal;">Szyfrowanych</div>
              <div style="font-weight: normal;">Nieszyfrowanych</div>
            </th>
            <td>
              <div id="user-sessions" style="font-weight: bold;"></div>
              <div id="user-sessions-encrypted"></div>
              <div id="user-sessions-unencrypted"></div>
            </td>
          </tr>
          <tr>
            <th>
              <div>Liczba sesji wychodzących serwerów</div>
              <div style="font-weight: normal;">Szyfrowanych</div>
              <div style="font-weight: normal;">Nieszyfrowanych</div>
            </th>
            <td>
              <div id="server-sessions-outgoing" style="font-weight: bold;"></div>
              <div id="server-sessions-outgoing-encrypted"></div>
              <div id="server-sessions-outgoing-unencrypted"></div>
            </td>
          </tr>
          <tr>
            <th>
              <div>Liczba sesji przychodzących serwerów</div>
              <div style="font-weight: normal;">Szyfrowanych</div>
              <div style="font-weight: normal;">Nieszyfrowanych</div>
            </th>
            <td>
              <div id="server-sessions-incoming" style="font-weight: bold;"></div>
              <div id="server-sessions-incoming-encrypted"></div>
              <div id="server-sessions-incoming-unencrypted"></div>
            </td>
          </tr>
          <tr>
            <th>Serwer został uruchomiony</th>
            <td>
              <div id="uptime" style="font-weight: bold;"></div>
            </td>
          </tr>
        </table>
      </div>
      <h3>Dostępność</h3>
      <a href="http://uptime.goldmann.pl/687613">
        <img src="https://share.pingdom.com/banners/0ffbf177">
      </a>
      <h3>Oprogramowanie</h3>
      <table class="table" style="width: 400px;">
        <tr>
          <th style="width: 200px;">System operacyjny</th>
          <td>CentOS 7</td>
        </tr>
        <tr>
          <th>Serwer XMPP</th>
          <td>
            <span>Prosody</span>
            <span id="version"></span>
          </td>
        </tr>
        <tr>
          <th>Obsługiwane porty</th>
          <td>5222 - TLS i połączenia nieszyfrowane<br/>5223 - SSL (nie zalecane)</td>
        </tr>
      </table>
      <!-- %tr -->
      <!-- %th Dostępne transporty -->
      <!-- %td -->
      <!-- %p <a href="http://community.igniterealtime.org/community/plugins/im_gateway_support">Kraken IM Gateway</a> 1.1.3beta3 -->
      <!-- %ul -->
      <!-- %li MSN Messenger -->
      <!-- %li IRC -->
      <!-- %li AOL Instant Messenger -->
      <!-- %li ICQ -->
      <!-- %li Yahoo! Messenger -->
      <!-- %li Google Talk -->
      <!-- %li XMPP -->
      <!-- %h3 Parametry techniczne fizycznego serwera -->
      <!-- %p W tej chwili używamy jednej maszyny wirtualnej na serwerze o konfiguracji przedstawionej poniżej. -->
      <!-- %table.table{:style=>"width: 400px;"} -->
      <!-- %tr -->
      <!-- %th{:style=>"width: 120px;"} Model serwera -->
      <!-- %td Dell PowerEdge 1950 III -->
      <!-- %tr -->
      <!-- %th Procesor -->
      <!-- %td 1x Intel Xeon E5430 (2.66GHz) -->
      <!-- %tr -->
      <!-- %th Pamiec RAM -->
      <!-- %td 8 GB ECC-R -->
      <!-- %tr -->
      <!-- %th Dysk twardy -->
      <!-- %td 2x 1 TB SATA II (RAID-1) -->
      <!-- %h3 Parametry techniczne wirtualnej maszyny -->
      <!-- %table.table{:style=>"width: 400px;"} -->
      <!-- %tr -->
      <!-- %th{:style=>"width: 120px;"} Procesor -->
      <!-- %td 1 rdzeń, Intel Xeon E5430 (2.66GHz) -->
      <!-- %tr -->
      <!-- %th Pamięć RAM -->
      <!-- %td 2 GB -->
      <!-- %tr -->
      <!-- %th Dysk twardy -->
      <!-- %td 20 GB -->
    </div>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-351971-2']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
