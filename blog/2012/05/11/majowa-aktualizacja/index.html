<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='pl' xml:lang='pl' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>&lt;jid.pl/&gt; | Majowe aktualizacje</title>
    <link href='/stylesheets/bootstrap.css' rel='stylesheet' type='text/css' />
    <script src='/javascripts/jquery-1.7.min.js'></script>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  </head>
  <style type='text/css'>
    /*<![CDATA[*/
      html,body {
        background: none;
      }
      h2 {
        margin-bottom: 10px;
      }
      html {
      }
      li {
        color: #404040;
      }
      ul.nav-pills {
        margin: 0;
      }
      p {
      }
      #main {
        box-shadow: 5px 10px 10px rgba(0, 0, 0, 0.4) inset;
      }
      #menu {
        padding: 10px;
        border-bottom: 1px solid #ccc;
      }
      #shadow {
      
        box-shadow: 0 10px 10px rgba(0, 0, 0, 0.4) inset;
      }
      #header {
        padding: 20px;
        clear: both;
        overflow: hidden;
        border-bottom: 10px solid #880000;
      }
      #content {
        padding: 10px;
        width: 670px;   
      }
      
      .hero-unit {
        padding: 30px;
      }
      
      ul.nav-pills {
        margin-top: 5px;
      }
      
      .nav-pills > li > a {
        font-weight: bold;
        border-radius: 8px;
        margin: 5px 5px 5px 0;
        color: #880000;
        text-shadow: none;
      }
      .nav-pills > li > a:hover {
        color: #ffffff;
        background-color: #aa0000;
        text-shadow: none;
      }
      .twtr-ft {
        display: none;
      }
      a {
        color: #880000;
      }
      a:hover {
        color: #aa0000;
        text-decoration: none;
      }
      .comments {
        padding: 10px 0;
      }
    /*]]>*/
  </style>
  <body>
    <div id='main'>
      <div id='menu'>
        <ul class='nav nav-pills'>
          <li><a href="/">Strona główna</a></li>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/info/">Informacje</a></li>
          <li><a href="/history/">Historia</a></li>
          <li><a href="/help/">Pomoc</a></li>
          <li><a href="/contact/">Kontakt</a></li>
        </ul>
      </div>
      <div id='header'>
        <img src='/images/logo.png' style='position: absolute; top: 20px; right: 20px;' />
        <h1><a href="/">&lt;jid.pl/&gt;</a> <small>Publiczny serwer Jabber/XMPP</small></h1>
      </div>
    </div>
    <div id='content'>
      <h2>Majowe aktualizacje</h2>
      <div class='row'>
        <div class='span5'>
          <div class='byline' style='border-bottom: 1px solid #eee; margin-bottom: 10px; padding-bottom: 10px;'>
            <div class='author'><strong>Marek Goldmann</strong></div>
            <div class='date'>11 May 2012 21:04 CEST</div>
            <div class='tags'>
              <a href='/blog/tags/aktualizacja/'>
                aktualizacja
              </a>
            </div>
          </div>
          <p>Najprawdopodobniej w dniu <strong>20 maja 2012</strong> nastąpi jedna z większych zaplanowanych aktualizacji na ten rok. Praktycznie rzecz biorąc zrobimy aktualizację wszystkiego oprócz oprogrogramowania samego serwera. Nadal będziemy używać Openfire 3.6.4. Ale i na niego przyjdzie czas w późniejszym terminie.</p>
          
          <p>A więc po kolei.</p>
          
          <h3>Sprzęt</h3>
          
          <p>Po pierwsze zmienimy fizyczny serwer na Della 1950. Będziemy mieć szybszy procesor i większe bezpieczeństwo danych w związku z <code>RAID 1</code> na dyskach, jednak użytkownicy tego nie odczują, niestety. Za to ja będę miał spokojniejszą głowę.</p>
          
          <h3>Łącze internetowe</h3>
          
          <p>Po <a href="/blog/2012/04/23/kwietniowe-awarie/">awariach kwietniowych</a> postanowiliśmy zmienić łącze Internetowe. Obecnie formalizowana jest umowa. W następnym tygodniu będzie instalowany sprzęt. W trakcie tego tygodnia będę przygotowywał serwery do nowych adresów, ponieważ cała operacja będzie wiązała się z rekonfguracją DNSów. Faktyczne przełączenie na nowy serwer nastąpi 20-ego maja, pewnie w godzinach okołopołudniowych.</p>
          
          <h3>System operacyjny</h3>
          
          <p>Aktualizacja nie ominie również systemu operacyjnego odpowiedzialnemu za działanie serwera. Będziemy migrować na nową wersję <a href="http://www.centos.org/">CentOS'a</a>: z 5 do 6.</p>
          
          <h2>Plan</h2>
          
          <p>Plan na aktualizację jest następujący:</p>
          
          <ol>
          <li>Utworzyć nową wirtualną maszynę na nowym serwerze.</li>
          <li>Skopiować bazę danych na nowy serwer (tak, tymczasowo).</li>
          <li>Skonfigurować serwer tak aby działał na nowym adresie IP.</li>
          <li>20 maja wyłączyć serwer Jabbera i skopiować bazę danych raz jeszcze.</li>
          <li>Zmienić dane w DNSach tak, aby wskazywały na nowy serwer.</li>
          <li>Czekać.</li>
          </ol>
          
          
          <p>Sama przerwa wymagana do skopiowania bazy danych powinna potrwać kilka minut. Propagacja nowych adresów po DNSach to od kilku minut do godziny.</p>
          
          <p>Tak czy owak proszę się przygotować na krótką przerwę w niedzielę, 20 maja. Zjedzcie obiad spokojnie, czy coś.</p>
          <div class='comments'>
            <script>
              var idcomments_acct='6eb4f3493c120245703a2155af29056d';
              var idcomments_post_id='e91c80f0ae64c1ba3bba69a6a061f9f14c4d341c';
               var idcomments_post_url='http://www.jid.pl/blog/2012/05/11/majowa-aktualizacja/';
            </script>
            <span id="IDCommentsPostTitle" style="display:none"></span>
            <script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
          </div>
        </div>
        <div class='span2'>
          <div style='margin-top: 20px;'>
            <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="boxgrinder">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
          </div>
          <div style='margin-top: 5px;'>
            <!-- Place this tag where you want the +1 button to render -->
            <g:plusone></g:plusone>
            
            <!-- Place this render call where appropriate -->
            <script type="text/javascript">
            (function() {
              var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
              po.src = 'https://apis.google.com/js/plusone.js';
              var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
            })();
            </script>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-351971-2");
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>
